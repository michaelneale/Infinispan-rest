<?xml version="1.0"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>

    <display-name>JBoss Drools Execution Server</display-name>


    <!-- HOW TO USE:

    1. this is where you can store the changeset XMLs
    <context-param>
        <param-name>agent-config-directory</param-name>
        <param-value>file:/Users/michaelneale/knowledgebases</param-value>
    </context-param>

    2. Then in that directory there would be knowlegdebase1.xml, knowledgebase2.xml etc...
    This is used in the URL as:
    /server/stateful|stateless/knowledgebase1 etc....

    The name of the changeset (minus the .xml) is used as the last part of the URL to select it.
    The contents of the changeset XML file are of the form:

    <change-set xmlns='http://drools.org/drools-5.0/change-set' xmlns:xs='http://www.w3.org/2001/XMLSchema-instance' xs:schemaLocation='http://drools.org/drools-5.0/change-set drools-change-set-5.0.xsd'>
        <add>
            <resource source='file:/Users/etc....' type='DRL'/>
        </add>
    </change-set>

    valid types are DRL, PKG and DTABLE at present (you can have multiple ones).

    Any valid URL can be used, including http, file, or even classpath ....

    3. To override default config options for the KnowledgeAgent, place a custom drools-agent.properties in the WEB-INF/classes directory.

    -->

    <!-- this enabled loop stopping - stops things from running off for infinite loops -->
    <context-param>
        <param-name>loop-detection-enabled</param-name>
        <param-value>true</param-value>
    </context-param>

    <listener>
        <listener-class>drools.rex.StatefulListener</listener-class>
    </listener>

    <listener>
        <listener-class>drools.rex.AgentListener</listener-class>
    </listener>


	<servlet>
		<servlet-name>stateless</servlet-name>
		<servlet-class>drools.rex.StatelessServer</servlet-class>
	</servlet>


   <servlet>
		<servlet-name>stateful</servlet-name>
		<servlet-class>drools.rex.StatefulServer</servlet-class>
	</servlet>

    <servlet>
        <servlet-name>status</servlet-name>
        <servlet-class>drools.rex.Status</servlet-class>
    </servlet>






	<servlet-mapping>
		<servlet-name>stateless</servlet-name>
		<url-pattern>/stateless/*</url-pattern>
	</servlet-mapping>


    <servlet-mapping>
		<servlet-name>stateful</servlet-name>
		<url-pattern>/stateful/*</url-pattern>
	</servlet-mapping>

    <servlet-mapping>
        <servlet-name>status</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>


    <session-config>
        <session-timeout>10</session-timeout>
    </session-config>


</web-app>
